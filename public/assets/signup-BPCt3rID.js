import{a,o as e,z as g,w as f}from"./chunk-QMGIS6GS-u2c-GNVz.js";import{A as w}from"./APIManager-CnQUELVG.js";import{E as v}from"./ErrorCard-Dh2R4Mx0.js";import{a as h,b as m,I as p,V as S,c as y,B as d,R as L,i as E,D as C,A as b,W as D,G as k}from"./interleave-d8VCDdle.js";import{I,S as i,J as R,k as c,L as M}from"./createSvgIcon-CCROtrPb.js";import"./Small-BmS_JMba.js";const P=()=>{const[s,o]=a.useState(!1);return e.jsxs("form",{onSubmit:n=>{n.preventDefault();const r=n.currentTarget.elements;r.username.value,r.password.value},children:[e.jsxs(h,{required:!0,children:[e.jsx(m,{children:"username"}),e.jsx(p,{type:"text",name:"username",autoComplete:"username"})]}),e.jsxs(h,{required:!0,sx:{mt:-1},children:[e.jsx(m,{children:"password"}),e.jsx(p,{type:s?"text":"password",name:"password",autoComplete:"new-password",endDecorator:e.jsx(I,{onClick:()=>o(!s),children:s?e.jsx(S,{}):e.jsx(y,{})})})]}),e.jsx(d,{type:"submit",fullWidth:!0,sx:{mt:2},children:"sign up"})]})},A=()=>{const[s,o]=a.useState(),[n,r]=a.useState(void 0),[x,l]=a.useState(!0),u=()=>{w.auth.getLoginTypes().then(t=>{t?.length?o(t):r("ERR_NO_SERVER_LOGIN_CONFIGS"),l(!1)}).catch(t=>{r(t),l(!1)})},j=()=>{o(void 0),r(void 0),l(!0)};return a.useEffect(()=>{u()},[]),[x].some(t=>t)?e.jsx(i,{direction:"row",justifyContent:"center",children:e.jsx(R,{variant:"soft"})}):n?e.jsxs(i,{gap:4,children:[e.jsx(v,{code:n,children:e.jsx(c,{level:"body-md",children:"either i can't load the authentication methods, or there are none set up. please check your connection, then contact the owner of this instance of atom."})}),e.jsx(d,{size:"sm",color:"primary",startDecorator:e.jsx(L,{}),onClick:()=>{j(),u()},children:"retry"})]}):e.jsxs(i,{gap:4,children:[e.jsxs(i,{gap:1,children:[e.jsx(c,{component:"h1",level:"h3",children:"sign up"}),e.jsxs(c,{level:"body-sm",component:"div",children:["already have an account?"," ",e.jsx(g,{to:"/login",children:e.jsx(M,{component:"div",children:"login here!"})})]})]}),E([...new Set(s)].map(t=>{switch(t){case"google":return e.jsx(d,{variant:"soft",color:"neutral",fullWidth:!0,startDecorator:e.jsx(k,{}),children:"sign up with google"},t);case"local":return e.jsx(P,{});default:return e.jsxs(b,{startDecorator:e.jsx(D,{}),color:"warning",variant:"outlined",children:["unsupported authentication method: ",t]},t)}}),e.jsx(C,{children:"or"}))]})},N=f(function({loaderData:o}){return e.jsx(A,{})});export{N as default};
