import{o as e,a as h,p as M}from"./chunk-QMGIS6GS-DtoyICqO.js";import{n as C}from"./noResultsKaomoji-CX4veuCQ.js";import{G as f}from"./GlobalPermissionCheck-D0CbPT0Q.js";import{A as w,G as v}from"./APIManager-B2UZ4w5a.js";import{S as D}from"./ErrorCard-KNXIau_K.js";import{T as R,K as T}from"./KeyboardArrowDownRounded-B5lcQ9S4.js";import{L as F,I as B}from"./Link-B5kWyCnV.js";import{T as a,S as x}from"./Stack-JCjNLC7t.js";import{F as H}from"./FolderRounded-D2ksPFiJ.js";import{c as g}from"./createSvgIcon-DQe4S7v3.js";import{D as I,M as P,a as U,S as p,A}from"./ContentFolderActionBar-Bqi-1Aj9.js";import{D as z}from"./LinearProgress-BtLiBgIz.js";import{b as L,c as E,D as G,d as N,e as W}from"./ModalDialog-B0YEj2t1.js";import{F as b,a as y,I as K}from"./FormLabel-C-0_FOk2.js";import{S as V,a as S}from"./Select-DBRM7IsL.js";import{B as $}from"./Button-31T2a4ki.js";const O=g(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5.44 3.53c.29-.29.77-.29 1.06 0l.88.88.88-.88c.29-.29.77-.29 1.06 0s.29.77 0 1.06l-.88.88.88.88c.29.29.29.77 0 1.06s-.77.29-1.06 0l-.88-.87-.88.88c-.29.29-.77.29-1.06 0s-.29-.77 0-1.06l.88-.88-.88-.88c-.3-.3-.3-.78 0-1.07M7 7.72h3.5c.41 0 .75.34.75.75s-.34.75-.75.75H7c-.41 0-.75-.34-.75-.75s.34-.75.75-.75M10.75 16H9.5v1.25c0 .41-.34.75-.75.75S8 17.66 8 17.25V16H6.75c-.41 0-.75-.34-.75-.75s.34-.75.75-.75H8v-1.25c0-.41.34-.75.75-.75s.75.34.75.75v1.25h1.25c.41 0 .75.34.75.75s-.34.75-.75.75m6.5 1.25h-3.5c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h3.5c.41 0 .75.34.75.75s-.34.75-.75.75m0-2.5h-3.5c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h3.5c.41 0 .75.34.75.75s-.34.75-.75.75"})),q=g(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),X=g(e.jsx("path",{d:"M12.65 15.67c.14-.36.05-.77-.23-1.05l-2.09-2.06.03-.03c1.74-1.94 2.98-4.17 3.71-6.53h1.94c.54 0 .99-.45.99-.99v-.02c0-.54-.45-.99-.99-.99H10V3c0-.55-.45-1-1-1s-1 .45-1 1v1H1.99c-.54 0-.99.45-.99.99 0 .55.45.99.99.99h10.18C11.5 7.92 10.44 9.75 9 11.35c-.81-.89-1.49-1.86-2.06-2.88-.16-.29-.45-.47-.78-.47-.69 0-1.13.75-.79 1.35.63 1.13 1.4 2.21 2.3 3.21L3.3 16.87c-.4.39-.4 1.03 0 1.42.39.39 1.02.39 1.42 0L9 14l2.02 2.02c.51.51 1.38.32 1.63-.35M17.5 10c-.6 0-1.14.37-1.35.94l-3.67 9.8c-.24.61.22 1.26.87 1.26.39 0 .74-.24.88-.61l.89-2.39h4.75l.9 2.39c.14.36.49.61.88.61.65 0 1.11-.65.88-1.26l-3.67-9.8c-.22-.57-.76-.94-1.36-.94m-1.62 7 1.62-4.33L19.12 17z"})),pe=({folders:o,content:r,path:s,reload:l})=>{const[t,m]=h.useState("ascending"),[i,c]=h.useState("name"),[j,k]=h.useState(0);return h.useEffect(()=>{k(Math.floor(Math.random()*C.length))},[]),e.jsxs(D,{variant:"outlined",sx:{width:1,borderRadius:"sm",flexShrink:1,overflow:"auto",minHeight:0},children:[e.jsxs(R,{stickyHeader:!0,hoverRow:!0,sx:{"--TableCell-headBackground":"var(--atom-palette-background-level1)","--TableRow-hoverBackground":"var(--atom-palette-background-level1)","--Table-headerUnderlineThickness":"1px","--TableCell-paddingY":"8px","--TableCell-paddingX":"8px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px 6px",width:60}}),e.jsx("th",{style:{padding:"12px 6px"},children:e.jsx(F,{underline:"none",color:"neutral",component:"button",onClick:()=>{i=="name"&&m(t=="ascending"?"descending":"ascending"),c("name")},endDecorator:i=="name"?e.jsx(T,{}):null,sx:[{fontWeight:"lg","& svg":{transition:"0.2s",transform:t=="descending"?"rotate(0deg)":"rotate(180deg)"}}],textColor:"text.secondary",children:"name"})}),e.jsx("th",{style:{padding:"12px 6px"},children:e.jsx(a,{sx:{fontWeight:"lg"},textColor:"text.secondary",children:"type"})}),e.jsx("th",{style:{width:60}})]})}),e.jsxs("tbody",{children:[s&&s.length>1?e.jsx(u,{folder:{id:s[s.length-2].id,name:".."},tdStyle:{borderBottom:"1px solid var(--TableCell-borderColor)"},noMore:!0}):s&&s.length==1?e.jsx(u,{folder:{id:"../",name:".."},tdStyle:{borderBottom:"1px solid var(--TableCell-borderColor)"},noMore:!0}):null,[...o].sort((n,d)=>(t=="ascending"?1:-1)*(n[i].toString().toUpperCase()<d[i].toString().toUpperCase()?-1:n[i].toString().toUpperCase()>d[i].toString().toUpperCase()?1:0)).map(n=>e.jsx(u,{folder:n,reload:l},n.id)),[...r].sort((n,d)=>(t=="ascending"?1:-1)*((n[i]||n.id).toString().toUpperCase()<(d[i]||d.id).toString().toUpperCase()?-1:(n[i]||n.id).toString().toUpperCase()>(d[i]||d.id).toString().toUpperCase()?1:0)).map(n=>e.jsx(Y,{content:n},n.id))]})]}),!o.length&&!r.length?e.jsxs(x,{sx:{p:3},children:[e.jsx(a,{sx:{textAlign:"center",mb:2},level:"h3",textColor:"text.tertiary",component:"code",children:C[j]}),e.jsx(a,{sx:{textAlign:"center"},level:"body-md",textColor:"text.tertiary",children:"no items"})]}):null]})},u=({folder:o,tdStyle:r,noMore:s=!1,reload:l})=>{const t=M();return e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>{t(`/dashboard/content/folder/${o.id}`)},children:[e.jsx("td",{style:r,children:e.jsx(x,{direction:"row",justifyContent:"center",children:e.jsx(H,{sx:{fontSize:20}})})}),e.jsx("td",{style:r,children:e.jsx(a,{level:"body-sm",textColor:"text.primary",noWrap:!0,overflow:"hidden",children:o.name})}),e.jsx("td",{style:r,children:e.jsx(a,{children:"folder"})}),e.jsx("td",{style:{padding:"0px 4px",...r},children:!s&&e.jsx(_,{onOpen:()=>{t(`/dashboard/content/folder/${o.id}`)},onDelete:async()=>{await w.content.deleteFolder(o.id),l?.()}})})]})},Y=({content:o})=>{const r=M(),s={fontSize:20};return e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>{r(`/dashboard/content/${o.id}`)},children:[e.jsx("td",{children:e.jsx(x,{direction:"row",justifyContent:"center",children:o.type=="string"?e.jsx(X,{sx:s}):e.jsx(O,{sx:s})})}),e.jsx("td",{children:e.jsx(a,{level:"body-sm",textColor:"text.primary",noWrap:!0,overflow:"hidden",children:o.name||o.id})}),e.jsx("td",{children:e.jsx(a,{children:o.type=="number"?"number content":"string content"})}),e.jsx("td",{})]})},_=({onOpen:o,onRename:r,onMove:s,onDelete:l})=>e.jsx(I,{children:e.jsxs(x,{children:[e.jsx(P,{slots:{root:B},slotProps:{root:{onClick:t=>{t.stopPropagation()},size:"sm"}},children:e.jsx(q,{})}),e.jsxs(U,{size:"sm",keepMounted:!0,children:[e.jsx(p,{onClick:t=>{t.stopPropagation(),o?.(t)},children:"open"}),e.jsxs(f,{permissions:[v.EditContentFolders],discreet:!0,children:[e.jsx(p,{onClick:t=>{t.stopPropagation(),r?.(t)},children:"rename"}),e.jsx(p,{onClick:t=>{t.stopPropagation(),s?.(t)},children:"move"})]}),e.jsxs(f,{permissions:[v.DeleteContentFolders],discreet:!0,children:[e.jsx(z,{}),e.jsx(p,{color:"danger",onClick:t=>{t.stopPropagation(),l?.(t)},children:"delete"})]})]})]})}),me=({open:o,onClose:r,createNewContent:s,newContentName:l,setNewContentName:t,newContentType:m,setNewContentType:i})=>e.jsx(L,{open:o,onClose:r,children:e.jsxs(E,{children:[e.jsx(G,{children:"new content"}),e.jsxs("form",{onSubmit:c=>{c.preventDefault(),r?.(),s?.()},children:[e.jsx(N,{children:e.jsxs(x,{gap:2,children:[e.jsxs(b,{children:[e.jsx(y,{children:"name"}),e.jsx(K,{autoFocus:!0,required:!0,value:l,onChange:c=>t?.(c.target.value)})]}),e.jsxs(b,{children:[e.jsx(y,{children:"type"}),e.jsxs(V,{value:m,onChange:(c,j)=>i?.(j||"string"),children:[e.jsx(S,{value:"string",children:"text"}),e.jsx(S,{value:"number",children:"numeric"})]})]})]})}),e.jsx(W,{children:e.jsx($,{type:"submit",startDecorator:e.jsx(A,{}),children:"submit"})})]})]})});export{pe as C,me as N};
