import{a as s,p as j,o as e}from"./chunk-QMGIS6GS-IYNE5lo-.js";import{A as S}from"./APIManager-mj48QvlX.js";import{E as v,S as y}from"./ErrorCard-uTo-NOV5.js";import{S as a,T as d}from"./Stack-0SagYPpj.js";import{L as E}from"./LinearProgress-DxqFVR98.js";const C=({permissions:t,centerVertically:m,start:f,end:h,redirect:o,children:p})=>{const[i,u]=s.useState(void 0),[n,x]=s.useState(!0),[c,l]=s.useState(!1),g=j();return s.useEffect(()=>{S.permission.me().then(r=>{u(r)}).catch(()=>{throw new Error("Server could not be accessed.")}).finally(()=>{x(!1)})},[]),s.useEffect(()=>{i&&(t.every(r=>i[r]||!1)?l(!0):l(!1))},[i]),!n&&!c&&o&&g(o),n||!c?e.jsx(a,{justifyContent:"center",alignItems:"center",width:"100%",height:m?"100%":"unset",children:n?e.jsx(I,{}):e.jsxs(a,{children:[f||null,e.jsx(v,{title:"no access",sx:{maxWidth:"400px"},code:"ERR_INSUFFICIENT_PERMISSION",children:e.jsx(d,{children:"apologies, but you don't have the sufficient permissions to access this feature. if you think this is a mistake, please contact an administrator."})}),h||null]})}):p},I=()=>e.jsx(y,{variant:"outlined",sx:{p:2,borderRadius:t=>t.radius.md},children:e.jsxs(a,{direction:"column",alignItems:"center",gap:2,children:[e.jsx(d,{level:"body-xs",sx:{"&::after":{content:"'\\2026'",display:"inline-block",verticalAlign:"bottom",overflow:"hidden",animation:"ellipsis steps(4, end) 1500ms infinite",width:0},"@keyframes ellipsis":{to:{width:"12px"}}},children:"checking permissions"}),e.jsx(E,{sx:{minWidth:"130px"}})]})});export{C as G};
