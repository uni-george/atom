import{a as l,o as n,z as H}from"./chunk-QMGIS6GS-DtoyICqO.js";import{G as oe}from"./GlobalPermissionCheck-D0CbPT0Q.js";import{G as ne}from"./APIManager-B2UZ4w5a.js";import{r as _,t as X,g as q,a as Q,u as Y,s as z,f as E,h as Z,b as T,S as me,B as re,T as A}from"./Stack-JCjNLC7t.js";import{u as ee,a as ue,B as fe,C as ge,L as O,I as xe}from"./Link-B5kWyCnV.js";import{F as se}from"./FormLabel-C-0_FOk2.js";import{g as he,B as ae}from"./Button-31T2a4ki.js";import{F as ve,B as le}from"./FolderRounded-D2ksPFiJ.js";import{c as de}from"./createSvgIcon-DQe4S7v3.js";import{G as be,c as Ce,d as ye,s as Re,R as Pe,e as Ie,S as Me}from"./ListItemButton-C-bDkTqT.js";import{g as De,b as W,l as je,d as we,e as Be,c as F,C as Se,L as te,u as ke,a as Le,V as Ve,f as Ee}from"./noResultsKaomoji-CX4veuCQ.js";import{u as ie,b as ze,a as Te}from"./Popper-DEf3PWv7.js";import{a as We,b as $e}from"./Small-BFUFtg_I.js";const N=l.createContext(null),w={blur:"dropdown:blur",escapeKeyDown:"dropdown:escapeKeyDown",toggle:"dropdown:toggle",open:"dropdown:open",close:"dropdown:close"};function Ae(t,e){switch(e.type){case w.blur:return{open:!1,changeReason:e.event};case w.escapeKeyDown:return{open:!1,changeReason:e.event};case w.toggle:return{open:!t.open,changeReason:e.event};case w.open:return{open:!0,changeReason:e.event};case w.close:return{open:!1,changeReason:e.event};default:throw new Error("Unhandled action")}}function He(t={}){const{defaultOpen:e,onOpenChange:o,open:s,componentName:r="useDropdown"}=t,[i,c]=l.useState(""),[u,m]=l.useState(null),p=l.useRef(null),g=l.useCallback((b,M,a,d)=>{M==="open"&&o?.(b,a),p.current=d},[o]),f=l.useMemo(()=>s!==void 0?{open:s}:{},[s]),[x,C]=De({controlledProps:f,initialState:e?{open:!0,changeReason:null}:{open:!1,changeReason:null},onStateChange:g,reducer:Ae,componentName:r});return l.useEffect(()=>{!x.open&&p.current!==null&&p.current!==w.blur&&u?.focus()},[x.open,u]),{contextValue:{state:x,dispatch:C,popupId:i,registerPopup:c,registerTrigger:m,triggerElement:u},open:x.open}}function Oe(t){const{children:e,open:o,defaultOpen:s,onOpenChange:r}=t,{contextValue:i}=He({defaultOpen:s,onOpenChange:r,open:o});return n.jsx(N.Provider,{value:i,children:e})}function Fe(t,e){if(e.type===W.itemHover)return{...t,highlightedValue:e.item};const o=je(t,e);if(o.highlightedValue===null&&e.context.items.length>0)return{...o,highlightedValue:e.context.items[0]};if(e.type===W.keyDown&&e.event.key==="Escape")return{...o,open:!1};if(e.type===W.blur&&!e.context.listboxRef.current?.contains(e.event.relatedTarget)){const s=e.context.listboxRef.current?.getAttribute("id"),r=e.event.relatedTarget?.getAttribute("aria-controls");return s&&r&&s===r?o:{...o,open:!1,highlightedValue:e.context.items[0]}}return o}const Ne={dispatch:()=>{},registerPopup:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function Ue(t={}){const{listboxRef:e,onItemsChange:o,id:s,disabledItemsFocusable:r=!0,disableListWrap:i=!1,autoFocus:c=!0,componentName:u="useMenu"}=t,m=l.useRef(null),p=_(m,e),g=ee(s)??"",{state:{open:f,changeReason:x},dispatch:C,triggerElement:P,registerPopup:b}=l.useContext(N)??Ne,M=l.useRef(f),{subitems:a,contextValue:d}=we(),D=l.useMemo(()=>Array.from(a.keys()),[a]),j=l.useCallback(v=>v==null?null:a.get(v)?.ref.current??null,[a]),h=l.useCallback(v=>a?.get(v)?.disabled||!1,[a]),y=l.useCallback(v=>a.get(v)?.label||a.get(v)?.ref.current?.innerText,[a]),B=l.useMemo(()=>({listboxRef:m}),[m]),{dispatch:S,getRootProps:k,contextValue:L,state:{highlightedValue:R},rootRef:V}=Be({disabledItemsFocusable:r,disableListWrap:i,focusManagement:"DOM",getItemDomElement:j,getInitialState:()=>({selectedValues:[],highlightedValue:null}),isItemDisabled:h,items:D,getItemAsString:y,rootRef:p,onItemsChange:o,reducerActionContext:B,selectionMode:"none",stateReducer:Fe,componentName:u});ie(()=>{b(g)},[g,b]),ie(()=>{f&&x?.type==="keydown"&&x.key==="ArrowUp"&&S({type:W.highlightLast,event:x})},[f,x,S]),l.useEffect(()=>{f&&c&&R&&!M.current&&a.get(R)?.ref?.current?.focus()},[f,c,R,a,D]),l.useEffect(()=>{m.current?.contains(document.activeElement)&&R!==null&&a?.get(R)?.ref.current?.focus()},[R,a]);const U=v=>I=>{v.onBlur?.(I),!I.defaultMuiPrevented&&(m.current?.contains(I.relatedTarget)||I.relatedTarget===P||C({type:w.blur,event:I}))},G=v=>I=>{v.onKeyDown?.(I),!I.defaultMuiPrevented&&I.key==="Escape"&&C({type:w.escapeKeyDown,event:I})},K=(v={})=>({onBlur:U(v),onKeyDown:G(v)}),J=(v={})=>{const I=F(K,k),$=X(v);return{...v,...$,...I($),id:g,role:"menu"}};return l.useDebugValue({subitems:a,highlightedValue:R}),{contextValue:{...d,...L},dispatch:S,getListboxProps:J,highlightedValue:R,listboxRef:V,menuItems:a,open:f,triggerElement:P}}function Ge(t){const{value:e,children:o}=t,{dispatch:s,getItemIndex:r,getItemState:i,registerItem:c,totalSubitemCount:u}=e,m=l.useMemo(()=>({dispatch:s,getItemState:i,getItemIndex:r}),[s,r,i]),p=l.useMemo(()=>({getItemIndex:r,registerItem:c,totalSubitemCount:u}),[c,r,u]);return n.jsx(Se.Provider,{value:p,children:n.jsx(te.Provider,{value:m,children:o})})}function Ke(t={}){const{disabled:e=!1,focusableWhenDisabled:o,rootRef:s}=t,r=l.useContext(N);if(r===null)throw new Error("useMenuButton: no menu context available.");const{state:i,dispatch:c,registerTrigger:u,popupId:m}=r,{getRootProps:p,rootRef:g,active:f}=ue({disabled:e,focusableWhenDisabled:o,rootRef:s}),x=_(g,u),C=a=>d=>{a.onClick?.(d),!d.defaultMuiPrevented&&c({type:w.toggle,event:d})},P=a=>d=>{a.onKeyDown?.(d),!d.defaultMuiPrevented&&(d.key==="ArrowDown"||d.key==="ArrowUp")&&(d.preventDefault(),c({type:w.open,event:d}))},b=(a={})=>({onClick:C(a),onKeyDown:P(a)});return{active:f,getRootProps:(a={})=>{const d=X(a),D=F(b,p);return{"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":m,...a,...d,...D(d),tabIndex:0,ref:x}},open:i.open,rootRef:x}}function Je(t){return`menu-item-${t.size}`}const _e={dispatch:()=>{}};function Xe(t){const{disabled:e=!1,id:o,rootRef:s,label:r,disableFocusOnHover:i=!1}=t,c=ee(o),u=l.useRef(null),m=l.useMemo(()=>({disabled:e,id:c??"",label:r,ref:u}),[e,c,r]),{dispatch:p}=l.useContext(N)??_e,{getRootProps:g,highlighted:f}=ke({item:c,handlePointerOverEvents:!i}),{index:x,totalItemCount:C}=Le(c??Je,m),{getRootProps:P,focusVisible:b,rootRef:M}=ue({disabled:e,focusableWhenDisabled:!0}),a=_(M,s,u);l.useDebugValue({id:c,highlighted:f,disabled:e,label:r});const d=h=>y=>{h.onClick?.(y),!y.defaultMuiPrevented&&p({type:w.close,event:y})},D=(h={})=>({...h,onClick:d(h)});function j(h={}){const y=X(h),B=F(D,F(P,g));return{...h,...y,...B(y),id:c,ref:a,role:"menuitem"}}return c===void 0?{getRootProps:j,disabled:!1,focusVisible:b,highlighted:!1,index:-1,totalItemCount:0,rootRef:a}:{getRootProps:j,disabled:e,focusVisible:b,highlighted:f,index:x,totalItemCount:C,rootRef:a}}function qe(t){const e=l.useContext(te);if(!e)throw new Error("MenuItem: ListContext was not found.");const o=ee(t),{getItemState:s,dispatch:r}=e;let i;o!=null?i=s(o):i={focusable:!0,highlighted:!1,selected:!1};const{highlighted:c,selected:u,focusable:m}=i,p=l.useCallback(f=>{if(f!==o)throw new Error(["Base UI MenuItem: Tried to access the state of another MenuItem.",`itemValue: ${f} | id: ${o}`,"This is unsupported when the MenuItem uses the MenuItemContextStabilizer as a performance optimization."].join("/n"));return{highlighted:c,selected:u,focusable:m}},[c,u,m,o]);return{contextValue:l.useMemo(()=>({dispatch:r,getItemState:p}),[r,p]),id:o}}function Qe(t){return q("MuiMenu",t)}Q("MuiMenu",["root","listbox","expanded","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const Ye=t=>{const{open:e,variant:o,color:s,size:r}=t,i={root:["root",e&&"expanded",o&&`variant${E(o)}`,s&&`color${E(s)}`,r&&`size${E(r)}`],listbox:["listbox"]};return Z(i,Qe,{})},ce=z(ye,{name:"JoyMenu",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t,ownerState:e})=>{const o=t.variants[e.variant]?.[e.color];return[{"--focus-outline-offset":`calc(${t.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":o?.backgroundColor||o?.background||t.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)",...Re,borderRadius:`var(--List-radius, ${t.vars.radius.sm})`,boxShadow:t.shadow.md,overflow:"auto",zIndex:`var(--unstable_popup-zIndex, ${t.vars.zIndex.popup})`,...!o?.backgroundColor&&{backgroundColor:t.vars.palette.background.popup},...e.variant==="solid"&&e.color&&e.invertedColors&&$e(e.color)(t),...e.variant==="soft"&&e.color&&e.invertedColors&&We(e.color)(t),...t.variants[e.variant]?.[e.color]}]}),Ze=l.forwardRef(function(e,o){const s=Y({props:e,name:"JoyMenu"}),{actions:r,children:i,color:c="neutral",component:u,disablePortal:m=!1,keepMounted:p=!1,id:g,invertedColors:f=!1,onItemsChange:x,modifiers:C,variant:P="outlined",size:b="md",slots:M={},slotProps:a={},...d}=s,{contextValue:D,getListboxProps:j,dispatch:h,open:y,triggerElement:B}=Ue({onItemsChange:x,id:g,listboxRef:o});l.useImperativeHandle(r,()=>({dispatch:h,resetHighlight:()=>h({type:W.resetHighlight,event:null})}),[h]);const S={...s,disablePortal:m,invertedColors:f,color:c,variant:P,size:b,open:y,nesting:!1,row:!1},k=Ye(S),L={...d,component:u,slots:M,slotProps:a},R=l.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...C||[]],[C]),V=ze({elementType:ce,getSlotProps:j,externalForwardedProps:L,externalSlotProps:{},ownerState:S,additionalProps:{anchorEl:B,open:y&&B!==null,disablePortal:m,keepMounted:p,modifiers:R},className:k.root});return n.jsx(ce,{...V,...!s.slots?.root&&{as:Te,slots:{root:u||"ul"}},children:n.jsx(Ge,{value:D,children:n.jsx(Ve,{variant:f?void 0:P,color:c,children:n.jsx(be.Provider,{value:"menu",children:n.jsx(Ce,{nested:!0,children:i})})})})})});function et(t){return q("MuiMenuButton",t)}Q("MuiMenuButton",["root","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]);const tt=t=>{const{color:e,disabled:o,fullWidth:s,size:r,variant:i,loading:c}=t,u={root:["root",o&&"disabled",s&&"fullWidth",i&&`variant${E(i)}`,e&&`color${E(e)}`,r&&`size${E(r)}`,c&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]};return Z(u,et,{})},ot=z("button",{name:"JoyMenuButton",slot:"Root",overridesResolver:(t,e)=>e.root})(he),nt=z("span",{name:"JoyMenuButton",slot:"StartDecorator",overridesResolver:(t,e)=>e.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),rt=z("span",{name:"JoyMenuButton",slot:"EndDecorator",overridesResolver:(t,e)=>e.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),st=z("span",{name:"JoyMenuButton",slot:"LoadingCenter",overridesResolver:(t,e)=>e.loadingIndicatorCenter})(({theme:t,ownerState:e})=>({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:t.variants[e.variant]?.[e.color]?.color,...e.disabled&&{color:t.variants[`${e.variant}Disabled`]?.[e.color]?.color}})),at=l.forwardRef(function(e,o){const s=Y({props:e,name:"JoyMenuButton"}),{children:r,color:i="neutral",component:c,disabled:u=!1,endDecorator:m,loading:p=!1,loadingPosition:g="center",loadingIndicator:f,size:x="md",slotProps:C={},slots:P={},startDecorator:b,variant:M="outlined",...a}=s,d=l.useContext(fe),D=e.variant||d.variant||M,j=e.size||d.size||x,h=e.disabled??(d.disabled||u||p),{getRootProps:y,open:B,active:S}=Ke({rootRef:o,disabled:h}),k=f??n.jsx(ge,{color:i,thickness:{sm:2,md:3,lg:4}[j]||3}),L={...s,active:S,color:i,disabled:h,open:B,size:j,variant:D},R=tt(L),V={...a,component:c,slots:P,slotProps:C},[U,G]=T("root",{elementType:ot,getSlotProps:y,externalForwardedProps:V,ref:o,ownerState:L,className:R.root}),[K,J]=T("startDecorator",{className:R.startDecorator,elementType:nt,externalForwardedProps:V,ownerState:L}),[v,I]=T("endDecorator",{className:R.endDecorator,elementType:rt,externalForwardedProps:V,ownerState:L}),[$,pe]=T("loadingIndicatorCenter",{className:R.loadingIndicatorCenter,elementType:st,externalForwardedProps:V,ownerState:L});return n.jsxs(U,{...G,children:[(b||p&&g==="start")&&n.jsx(K,{...J,children:p&&g==="start"?k:b}),r,p&&g==="center"&&n.jsx($,{...pe,children:k}),(m||p&&g==="end")&&n.jsx(v,{...I,children:p&&g==="end"?k:m})]})});function lt(t){return q("MuiMenuItem",t)}Q("MuiMenuItem",["root","focusVisible","disabled","selected","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const it=t=>{const{focusVisible:e,disabled:o,selected:s,color:r,variant:i}=t,c={root:["root",e&&"focusVisible",o&&"disabled",s&&"selected",r&&`color${E(r)}`,i&&`variant${E(i)}`]};return Z(c,lt,{})},ct=z(Me,{name:"JoyMenuItem",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ut=l.forwardRef(function(e,o){const s=Y({props:e,name:"JoyMenuItem"}),r=l.useContext(Pe),{children:i,disabled:c=!1,component:u="li",selected:m=!1,color:p="neutral",orientation:g="horizontal",variant:f="plain",slots:x={},slotProps:C={},id:P,...b}=s,{variant:M=f,color:a=p}=Ee(e.variant,e.color),{getRootProps:d,disabled:D,focusVisible:j}=Xe({id:P,disabled:c,rootRef:o}),h={...s,component:u,color:a,disabled:D,focusVisible:j,orientation:g,selected:m,row:r,variant:M},y=it(h),B={...b,component:u,slots:x,slotProps:C},[S,k]=T("root",{ref:o,elementType:ct,getSlotProps:d,externalForwardedProps:B,className:y.root,ownerState:h});return n.jsx(Ie.Provider,{value:g,children:n.jsx(S,{...k,children:i})})}),dt=l.memo(ut),pt=l.forwardRef(function(e,o){const{contextValue:s,id:r}=qe(e.id);return n.jsx(te.Provider,{value:s,children:n.jsx(dt,{...e,id:r,ref:o})})}),mt=de(n.jsx("path",{d:"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1"})),ft=de(n.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),Bt=({path:t,onNewFolder:e,onNewContent:o})=>n.jsxs(me,{direction:{sm:"row",xs:"column"},justifyContent:"space-between",gap:1.5,sx:{pb:2,maxWidth:"100%"},children:[n.jsxs(re,{sx:{flexGrow:1,display:"flex",justifyContent:"start",alignItems:"center",flexDirection:"row",maxWidth:{xs:1,sm:"calc(100% - ((2 * 140px) + (2 * 1.5 * var(--atom-spacing))))"}},children:[n.jsx(H,{to:"/dashboard/content",children:n.jsx(O,{component:"div",level:"h3",textColor:"text.primary",sx:{width:"fit-content"},children:"/"})}),t&&t.length?n.jsx(gt,{path:t}):null]}),n.jsxs(re,{sx:{display:"flex",gap:1.5,justifyContent:{xs:"start",sm:"end"},alignItems:"center","& button":{width:"140px"},minWidth:"calc((2 * 140px) + (1.5 * var(--atom-spacing)))"},children:[n.jsx(oe,{permissions:[ne.CreateContentFolders],discreet:!0,children:n.jsx(se,{children:n.jsx(ae,{startDecorator:n.jsx(ve,{}),color:"success",variant:"outlined",onClick:e,children:"new folder"})})}),n.jsx(oe,{permissions:[ne.CreateContent],discreet:!0,children:n.jsx(se,{children:n.jsx(ae,{startDecorator:n.jsx(mt,{}),color:"success",onClick:o,children:"new content"})})})]})]}),gt=({path:t})=>{if(t.length<3)return n.jsx(le,{separator:n.jsx(A,{level:"h3",children:"/"}),sx:{width:"fit-content",maxWidth:"calc(100% - 9px)",flexGrow:1,p:0,pl:1,"& li":{maxWidth:{xs:"calc(100% / 2)"}}},children:t.map((o,s,r)=>n.jsx(H,{to:`/dashboard/content/folder/${o.id}`,style:{width:"100%"},children:n.jsx(O,{component:"div",level:"h3",maxWidth:1,textColor:s==r.length-1?"text.primary":void 0,children:n.jsx(A,{noWrap:!0,maxWidth:1,children:o.name})})}))});let e=[...t];return e.shift(),e.pop(),n.jsxs(Oe,{children:[n.jsx(Ze,{children:e.map(o=>n.jsx(H,{to:`/dashboard/content/folder/${o.id}`,style:{textDecoration:"none"},children:n.jsx(pt,{children:n.jsx(O,{component:"div",children:o.name})})}))}),n.jsx(le,{separator:n.jsx(A,{level:"h3",children:"/"}),sx:{p:0,pl:1,maxWidth:"calc(100% - 9px)",flexGrow:1,"& li":{maxWidth:{xs:"calc(100% / 3)"}}},children:[].concat(...[t[0],t[t.length-1]].map((o,s,r)=>n.jsx(H,{to:`/dashboard/content/folder/${o.id}`,style:{width:"100%"},children:n.jsx(O,{component:"div",level:"h3",maxWidth:1,textColor:s==r.length-1?"text.primary":void 0,children:n.jsx(A,{noWrap:!0,maxWidth:1,children:o.name})})}))).map(o=>[o,n.jsx(at,{slots:{root:xe},slotProps:{root:{color:"primary",variant:"plain"}},children:n.jsx(ft,{sx:{fontSize:"24px"}})})]).flat().slice(0,-1)})]})};export{mt as A,Bt as C,Oe as D,at as M,gt as P,pt as S,Ze as a};
