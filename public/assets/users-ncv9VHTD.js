import{a as n,o as t,p as N,w as O}from"./chunk-QMGIS6GS-IYNE5lo-.js";import{A as I,G as X}from"./APIManager-DjZ2JeQn.js";import{S as Y}from"./ErrorCard-B4H1QsYl.js";import{g as G,a as J,u as q,_ as K,b as w,c as V,s as Q,d as Z,j as S,e as ee,B as U}from"./Box-DYWOHMTh.js";import{a as re,S as D,T as H}from"./Stack-BtWcuzwx.js";import{I as te,A as oe,G as ae}from"./GlobalPermissionCheck-iFLQ6vKB.js";import{c as P,L as le}from"./createSvgIcon-B5DNpR_6.js";import{C as ne}from"./CircularProgress-DXBXuAGW.js";import{D as se,s as ie}from"./setDashboardNavigationContext-CnF1Qzgx.js";import{D as de}from"./LinearProgress-CQVqLp0U.js";import{F as ce,a as ue,I as be}from"./FormLabel-pKFL5MWd.js";import{g as pe}from"./defaultMeta-DeBRnKiC.js";import{D as he}from"./dashboardSidebar-CNRdVuWc.js";import"./Small-B47FBGJb.js";import"./styleUtils-DeGQejeq.js";import"./useIsFocusVisible-DWNmkbBi.js";import"./dividerClasses-CVaPNh8D.js";function ge(e){return G("MuiTable",e)}J("MuiTable",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","stickyHeader","stickyFooter","noWrap","hoverRow","borderAxisNone","borderAxisX","borderAxisXBetween","borderAxisY","borderAxisYBetween","borderAxisBoth","borderAxisBothBetween"]);const fe=["className","component","children","borderAxis","hoverRow","noWrap","size","variant","color","stripe","stickyHeader","stickyFooter","slots","slotProps"],ve=e=>{const{size:r,variant:o,color:i,borderAxis:b,stickyHeader:a,stickyFooter:c,noWrap:p,hoverRow:l}=e,d={root:["root",a&&"stickyHeader",c&&"stickyFooter",p&&"noWrap",l&&"hoverRow",b&&`borderAxis${S(b)}`,o&&`variant${S(o)}`,i&&`color${S(i)}`,r&&`size${S(r)}`]};return ee(d,ge,{})},s={getColumnExceptFirst(){return"& tr > *:not(:first-of-type), & tr > th + td, & tr > td + th"},getCell(){return"& th, & td"},getHeadCell(){return"& th"},getHeaderCell(){return"& thead th"},getHeaderCellOfRow(e){return`& thead tr:nth-of-type(${e}) th`},getBottomHeaderCell(){return"& thead th:not([colspan])"},getHeaderNestedFirstColumn(){return"& thead tr:not(:first-of-type) th:not([colspan]):first-of-type"},getDataCell(){return"& td"},getDataCellExceptLastRow(){return"& tr:not(:last-of-type) > td"},getBodyCellExceptLastRow(){return`${this.getDataCellExceptLastRow()}, & tr:not(:last-of-type) > th[scope="row"]`},getBodyCellOfRow(e){return typeof e=="number"&&e<0?`& tbody tr:nth-last-of-type(${Math.abs(e)}) td, & tbody tr:nth-last-of-type(${Math.abs(e)}) th[scope="row"]`:`& tbody tr:nth-of-type(${e}) td, & tbody tr:nth-of-type(${e}) th[scope="row"]`},getBodyRow(e){return e===void 0?"& tbody tr":`& tbody tr:nth-of-type(${e})`},getFooterCell(){return"& tfoot th, & tfoot td"},getFooterFirstRowCell(){return"& tfoot tr:not(:last-of-type) th, & tfoot tr:not(:last-of-type) td"}},xe=Q("table",{name:"JoyTable",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e,ownerState:r})=>{var o,i,b,a,c,p,l;const d=(o=e.variants[r.variant])==null?void 0:o[r.color];return[w({"--Table-headerUnderlineThickness":"2px","--TableCell-borderColor":(i=d?.borderColor)!=null?i:e.vars.palette.divider,"--TableCell-headBackground":`var(--Sheet-background, ${e.vars.palette.background.surface})`},r.size==="sm"&&{"--unstable_TableCell-height":"var(--TableCell-height, 32px)","--TableCell-paddingX":"0.25rem","--TableCell-paddingY":"0.25rem"},r.size==="md"&&{"--unstable_TableCell-height":"var(--TableCell-height, 40px)","--TableCell-paddingX":"0.5rem","--TableCell-paddingY":"0.375rem"},r.size==="lg"&&{"--unstable_TableCell-height":"var(--TableCell-height, 48px)","--TableCell-paddingX":"0.75rem","--TableCell-paddingY":"0.5rem"},{tableLayout:"fixed",width:"100%",borderSpacing:"0px",borderCollapse:"separate",borderRadius:"var(--TableCell-cornerRadius, var(--unstable_actionRadius))"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[r.size]}`],(b=e.variants[r.variant])==null?void 0:b[r.color],{"& caption":{color:e.vars.palette.text.tertiary,padding:"calc(2 * var(--TableCell-paddingY)) var(--TableCell-paddingX)"},[s.getDataCell()]:w({padding:"var(--TableCell-paddingY) var(--TableCell-paddingX)",height:"var(--unstable_TableCell-height)",borderColor:"var(--TableCell-borderColor)",backgroundColor:"var(--TableCell-dataBackground)"},r.noWrap&&{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),[s.getHeadCell()]:{textAlign:"left",padding:"var(--TableCell-paddingY) var(--TableCell-paddingX)",backgroundColor:"var(--TableCell-headBackground)",height:"var(--unstable_TableCell-height)",fontWeight:e.vars.fontWeight.lg,borderColor:"var(--TableCell-borderColor)",color:e.vars.palette.text.secondary,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},[s.getHeaderCell()]:{verticalAlign:"bottom","&:first-of-type":{borderTopLeftRadius:"var(--TableCell-cornerRadius, var(--unstable_actionRadius))"},"&:last-of-type":{borderTopRightRadius:"var(--TableCell-cornerRadius, var(--unstable_actionRadius))"}},"& tfoot tr > *":{backgroundColor:`var(--TableCell-footBackground, ${e.vars.palette.background.level1})`,"&:first-of-type":{borderBottomLeftRadius:"var(--TableCell-cornerRadius, var(--unstable_actionRadius))"},"&:last-of-type":{borderBottomRightRadius:"var(--TableCell-cornerRadius, var(--unstable_actionRadius))"}}}),(((a=r.borderAxis)==null?void 0:a.startsWith("x"))||((c=r.borderAxis)==null?void 0:c.startsWith("both")))&&{[s.getHeaderCell()]:{borderBottomWidth:1,borderBottomStyle:"solid"},[s.getBottomHeaderCell()]:{borderBottomWidth:"var(--Table-headerUnderlineThickness)",borderBottomStyle:"solid"},[s.getBodyCellExceptLastRow()]:{borderBottomWidth:1,borderBottomStyle:"solid"},[s.getFooterCell()]:{borderTopWidth:1,borderTopStyle:"solid"}},(((p=r.borderAxis)==null?void 0:p.startsWith("y"))||((l=r.borderAxis)==null?void 0:l.startsWith("both")))&&{[`${s.getColumnExceptFirst()}, ${s.getHeaderNestedFirstColumn()}`]:{borderLeftWidth:1,borderLeftStyle:"solid"}},(r.borderAxis==="x"||r.borderAxis==="both")&&{[s.getHeaderCellOfRow(1)]:{borderTopWidth:1,borderTopStyle:"solid"},[s.getBodyCellOfRow(-1)]:{borderBottomWidth:1,borderBottomStyle:"solid"},[s.getFooterCell()]:{borderBottomWidth:1,borderBottomStyle:"solid"}},(r.borderAxis==="y"||r.borderAxis==="both")&&{"& tr > *:first-of-type":{borderLeftWidth:1,borderLeftStyle:"solid"},"& tr > *:last-of-type:not(:first-of-type)":{borderRightWidth:1,borderRightStyle:"solid"}},r.stripe&&{[s.getBodyRow(r.stripe)]:{background:`var(--TableRow-stripeBackground, ${e.vars.palette.background.level2})`,color:e.vars.palette.text.primary}},r.hoverRow&&{[s.getBodyRow()]:{"&:hover":{background:`var(--TableRow-hoverBackground, ${e.vars.palette.background.level3})`}}},r.stickyHeader&&{[s.getHeaderCell()]:{position:"sticky",top:0,zIndex:e.vars.zIndex.table},[s.getHeaderCellOfRow(2)]:{top:"var(--unstable_TableCell-height)"}},r.stickyFooter&&{[s.getFooterCell()]:{position:"sticky",bottom:0,zIndex:e.vars.zIndex.table,color:e.vars.palette.text.secondary,fontWeight:e.vars.fontWeight.lg},[s.getFooterFirstRowCell()]:{bottom:"var(--unstable_TableCell-height)"}}]}),me=n.forwardRef(function(r,o){const i=q({props:r,name:"JoyTable"}),{className:b,component:a,children:c,borderAxis:p="xBetween",hoverRow:l=!1,noWrap:d=!1,size:g="md",variant:f="plain",color:A="neutral",stripe:v,stickyHeader:C=!1,stickyFooter:m=!1,slots:T={},slotProps:B={}}=i,x=K(i,fe),R=w({},i,{borderAxis:p,hoverRow:l,noWrap:d,component:a,size:g,color:A,variant:f,stripe:v,stickyHeader:C,stickyFooter:m}),j=ve(R),$=w({},x,{component:a,slots:T,slotProps:B}),[k,y]=V("root",{ref:o,className:Z(j.root,b),elementType:xe,externalForwardedProps:$,ownerState:R});return t.jsx(re.Provider,{value:!0,children:t.jsx(k,w({},y,{children:c}))})}),ye=P(t.jsx("path",{d:"M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41 0s.39 1.02 0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41 0L6.7 10.7a.996.996 0 0 1 0-1.41c.39-.38 1.03-.39 1.42 0"})),Ce=P(t.jsx("path",{d:"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0s.41-1.08 0-1.49zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}));function Te(e,r,o,i){var b=this,a=n.useRef(null),c=n.useRef(0),p=n.useRef(0),l=n.useRef(null),d=n.useRef([]),g=n.useRef(),f=n.useRef(),A=n.useRef(e),v=n.useRef(!0);A.current=e;var C=typeof window<"u",m=!r&&r!==0&&C;if(typeof e!="function")throw new TypeError("Expected a function");r=+r||0;var T=!!(o=o||{}).leading,B=!("trailing"in o)||!!o.trailing,x="maxWait"in o,R="debounceOnServer"in o&&!!o.debounceOnServer,j=x?Math.max(+o.maxWait||0,r):null;n.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var $=n.useMemo(function(){var k=function(u){var h=d.current,F=g.current;return d.current=g.current=null,c.current=u,p.current=p.current||u,f.current=A.current.apply(F,h)},y=function(u,h){m&&cancelAnimationFrame(l.current),l.current=m?requestAnimationFrame(u):setTimeout(u,h)},L=function(u){if(!v.current)return!1;var h=u-a.current;return!a.current||h>=r||h<0||x&&u-c.current>=j},z=function(u){return l.current=null,B&&d.current?k(u):(d.current=g.current=null,f.current)},_=function u(){var h=Date.now();if(T&&p.current===c.current&&M(),L(h))return z(h);if(v.current){var F=r-(h-a.current),E=x?Math.min(F,j-(h-c.current)):F;y(u,E)}},M=function(){},W=function(){if(C||R){var u=Date.now(),h=L(u);if(d.current=[].slice.call(arguments),g.current=b,a.current=u,h){if(!l.current&&v.current)return c.current=a.current,y(_,r),T?k(a.current):f.current;if(x)return y(_,r),k(a.current)}return l.current||y(_,r),f.current}};return W.cancel=function(){l.current&&(m?cancelAnimationFrame(l.current):clearTimeout(l.current)),c.current=0,d.current=a.current=g.current=l.current=null},W.isPending=function(){return!!l.current},W.flush=function(){return l.current?z(Date.now()):f.current},W},[T,x,r,j,B,m,C,R,i]);return $}const Re=({nameSearch:e})=>{const[r,o]=n.useState(void 0),[i,b]=n.useState(!0),[a,c]=n.useState("ascending"),[p,l]=n.useState("name"),d=Te(async()=>{b(!0);let g=await I.user.search({sortDirection:a,sortBy:p,name:e||void 0});o(g),b(!1)},500,{leading:!1});return n.useEffect(()=>{d()},[e]),t.jsxs(Y,{variant:"outlined",sx:{width:1,borderRadius:"sm",flexShrink:1,overflow:"auto",minHeight:0},children:[t.jsxs(me,{stickyHeader:!0,hoverRow:!0,sx:{"--TableCell-headBackground":"var(--atom-palette-background-level1)","--TableRow-hoverBackground":"var(--atom-palette-background-level1)","--Table-headerUnderlineThickness":"1px","--TableCell-paddingY":"8px","--TableCell-paddingX":"8px"},children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{width:60,padding:"12px 6px"},children:t.jsx(D,{justifyContent:"center",alignItems:"center",children:t.jsx(te,{})})}),t.jsx("th",{style:{padding:"12px 6px"},children:t.jsx(le,{underline:"none",color:"neutral",component:"button",onClick:()=>{p=="name"&&c(a=="ascending"?"descending":"ascending"),l("name"),d()},endDecorator:t.jsx(ye,{}),sx:[{fontWeight:"lg","& svg":{transition:"0.2s",transform:a=="descending"?"rotate(0deg)":"rotate(180deg)"}}],children:"name"})})]})}),t.jsx("tbody",{children:i?null:r?.map(g=>t.jsx(je,{user:g},g.id))})]}),i?t.jsx(D,{justifyContent:"center",alignItems:"center",width:1,height:1,sx:{p:3},children:t.jsx(ne,{})}):r?.length?null:t.jsxs(D,{sx:{p:3},children:[t.jsx(H,{sx:{textAlign:"center"},level:"h3",textColor:"text.tertiary",children:"Σ(°∇°⁈)"}),t.jsx(H,{sx:{textAlign:"center"},level:"body-md",textColor:"text.tertiary",children:"no users"})]})]})},je=({user:e})=>{const[r,o]=n.useState(void 0),i=N();return n.useEffect(()=>{o(void 0),e.avatarID&&I.image.getURL(e.avatarID||"").then(b=>{o(b)})},[e.avatarID]),t.jsxs("tr",{onClick:()=>{i(e.id)},children:[t.jsx("td",{children:t.jsx(D,{direction:"row",justifyContent:"center",children:t.jsx(oe,{src:r,children:e.name.slice(0,1)})})}),t.jsx("td",{children:t.jsx(H,{level:"body-sm",children:e.name})})]})},ke=()=>{const[e,r]=n.useState(void 0);return t.jsxs(t.Fragment,{children:[t.jsx(de,{}),t.jsx(se,{children:t.jsx(ae,{centerVertically:!0,permissions:[X.ManageUsers],children:t.jsxs(U,{sx:{minHeight:1,minWidth:1},children:[t.jsx(U,{sx:{borderRadius:"sm",py:2,display:{xs:"none",sm:"flex"},flexWrap:"wrap",gap:1.5},children:t.jsxs(ce,{size:"sm",sx:{flex:1},children:[t.jsx(ue,{children:"search for user"}),t.jsx(be,{size:"sm",placeholder:"search",startDecorator:t.jsx(Ce,{}),value:e,onChange:o=>{r(o.target.value)}})]})}),t.jsx(Re,{nameSearch:e})]})})})]})};function Ne({}){return pe("users - atom")}const Oe=O(function({}){return ie({route:[{name:"users",href:"/dashboard/users"}],sidebarActiveTab:he.users,title:"users"}),t.jsx(ke,{})});export{Oe as default,Ne as meta};
