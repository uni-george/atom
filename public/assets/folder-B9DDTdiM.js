import{a as n,p as R,o as e,z as O,w as P}from"./chunk-QMGIS6GS-DtoyICqO.js";import{g as $}from"./defaultMeta-DeBRnKiC.js";import{D as U,s as q}from"./setDashboardNavigationContext-BWyQ02lE.js";import{A as a}from"./APIManager-B2UZ4w5a.js";import{A as z,C as K}from"./ContentFolderActionBar-Bqi-1Aj9.js";import{n as G}from"./noResultsKaomoji-CX4veuCQ.js";import{N as H,C as J}from"./NewContentModal-C_rptVmj.js";import{D as Q}from"./LinearProgress-BtLiBgIz.js";import{b as V,c as W,D as X,d as Y,e as Z}from"./ModalDialog-B0YEj2t1.js";import{F as _,a as ee,I as te}from"./FormLabel-C-0_FOk2.js";import{B as oe}from"./Button-31T2a4ki.js";import{B as ne,S as N,T as i}from"./Stack-JCjNLC7t.js";import{C as re,L as se}from"./Link-B5kWyCnV.js";import{D as ae}from"./GlobalPermissionCheck-D0CbPT0Q.js";import"./FolderRounded-D2ksPFiJ.js";import"./createSvgIcon-DQe4S7v3.js";import"./ListItemButton-C-bDkTqT.js";import"./Small-BFUFtg_I.js";import"./Popper-DEf3PWv7.js";import"./index-Cwr4DWDF.js";import"./ErrorCard-KNXIau_K.js";import"./KeyboardArrowDownRounded-B5lcQ9S4.js";import"./Select-DBRM7IsL.js";import"./createSvgIcon-D815fwpB.js";import"./dividerClasses-BlvlTBdT.js";import"./CardActions-D6HWY4Rd.js";import"./buttonClasses-Cy5i3mdA.js";import"./ownerWindow-nKC3jW2g.js";import"./useEventCallback-6_SerCR8.js";import"./SelfPermissionCacheContext-DOzmS9ty.js";const ie=({folderID:l})=>{const[d,r]=n.useState(!0),[o,c]=n.useState(),[u,D]=n.useState(),[le,m]=n.useState(),[E,p]=n.useState(!1),[x,C]=n.useState(""),[g,w]=n.useState("new content"),[j,F]=n.useState("string"),[S,h]=n.useState(!1),b=R(),v=()=>{r(!0),c(void 0)},A=()=>{a.content.getFolder(l||"",!0,!0).then(t=>{try{if(t){let s=t.childFolders?.map(f=>({id:f,name:"test"}));s?.forEach(async(f,y,k)=>{let B=await a.content.getFolder(f.id);(s?.[y]).name=B?.name||"unknown folder",y==k.length-1&&D(s)})}}catch{console.log("eeeeeeeeeEEEEEEEEE")}c(t)}).catch(t=>{m(t)}).finally(()=>{r(!1)})},I=()=>{o&&(C("new folder"),p(!0))},M=()=>{w("new content"),F("string"),h(!0)},T=async()=>{if(o)try{r(!0);let t=await a.content.createFolder(x,o.id);if(!t)throw new Error("Could not create folder.");b(`/dashboard/content/folder/${encodeURIComponent(t.id)}`)}catch(t){r(!1),m(t)}},L=async()=>{h(!1);try{r(!0);let t=await a.content.create({name:g,type:j,parentID:o?.id});if(!t)throw new Error("Could not crate content.");b(`/dashboard/content/${encodeURIComponent(t.id)}`)}catch(t){r(!1),m(t)}};return n.useEffect(()=>{let t={...o};t.childFolders=u,c(t)},[u]),n.useEffect(()=>{v(),A()},[l]),e.jsxs(e.Fragment,{children:[e.jsx(Q,{}),e.jsxs(U,{children:[e.jsx(H,{open:S,createNewContent:L,newContentName:g,setNewContentName:w,newContentType:j,setNewContentType:F,onClose:()=>{h(!1)}}),e.jsx(V,{open:E,onClose:()=>p(!1),children:e.jsxs(W,{children:[e.jsx(X,{children:"new folder"}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),p(!1),T()},children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(ee,{children:"name"}),e.jsx(te,{autoFocus:!0,required:!0,value:x,onChange:t=>C(t.target.value)})]})}),e.jsx(Z,{children:e.jsx(oe,{type:"submit",startDecorator:e.jsx(z,{}),children:"submit"})})]})]})}),e.jsxs(ne,{sx:{width:1},children:[e.jsx(K,{path:o?.path,onNewFolder:I,onNewContent:M}),d?e.jsx(N,{justifyContent:"center",alignItems:"center",width:1,height:300,children:e.jsx(re,{})}):o?e.jsxs(e.Fragment,{children:[e.jsx(J,{path:o.path,folders:o.childFolders,content:o.childContent||[],reload:()=>{}}),e.jsxs(i,{sx:{pt:1.5},level:"body-sm",children:["folder ID: ",o.id]})]}):e.jsxs(N,{sx:{p:3},children:[e.jsx(i,{sx:{textAlign:"center",mb:2},level:"h1",textColor:"text.tertiary",component:"code",children:G[0]}),e.jsx(i,{sx:{textAlign:"center"},level:"body-lg",textColor:"text.tertiary",children:"unknown folder"}),e.jsx(i,{sx:{textAlign:"center",mt:1},children:e.jsx(O,{to:"/dashboard/content",children:e.jsx(se,{component:"div",children:"back to /"})})})]})]})]})]})};function $e({}){return $("folder - atom")}const Ue=P(function({params:d}){return q({route:[{name:"content",href:"/dashboard/content"}],sidebarActiveTab:ae.content,title:"content"}),e.jsx(ie,{folderID:d.id})});export{Ue as default,$e as meta};
