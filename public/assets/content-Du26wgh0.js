import{a as o,p as v,o as e,w as y}from"./chunk-QMGIS6GS-DtoyICqO.js";import{g as T}from"./defaultMeta-DeBRnKiC.js";import{D as M,s as A}from"./setDashboardNavigationContext-BWyQ02lE.js";import{D as B}from"./GlobalPermissionCheck-D0CbPT0Q.js";import{A as c}from"./APIManager-B2UZ4w5a.js";import{N as E,C as I}from"./NewContentModal-C_rptVmj.js";import{A as R,C as L}from"./ContentFolderActionBar-Bqi-1Aj9.js";import{D as O}from"./LinearProgress-BtLiBgIz.js";import{b as P,c as U,D as $,d as k,e as q}from"./ModalDialog-B0YEj2t1.js";import{F as z,a as G,I as H}from"./FormLabel-C-0_FOk2.js";import{B as J}from"./Button-31T2a4ki.js";import{B as K,S as Q}from"./Stack-JCjNLC7t.js";import{C as V}from"./Link-B5kWyCnV.js";import"./ErrorCard-KNXIau_K.js";import"./Small-BFUFtg_I.js";import"./createSvgIcon-DQe4S7v3.js";import"./SelfPermissionCacheContext-DOzmS9ty.js";import"./noResultsKaomoji-CX4veuCQ.js";import"./Popper-DEf3PWv7.js";import"./index-Cwr4DWDF.js";import"./KeyboardArrowDownRounded-B5lcQ9S4.js";import"./FolderRounded-D2ksPFiJ.js";import"./Select-DBRM7IsL.js";import"./ListItemButton-C-bDkTqT.js";import"./createSvgIcon-D815fwpB.js";import"./dividerClasses-BlvlTBdT.js";import"./CardActions-D6HWY4Rd.js";import"./buttonClasses-Cy5i3mdA.js";import"./ownerWindow-nKC3jW2g.js";import"./useEventCallback-6_SerCR8.js";const W=()=>{const[r,C]=o.useState(),[x,n]=o.useState(!0),[X,s]=o.useState(""),[l,g]=o.useState(!1),d=v(),[j,a]=o.useState(!1),[m,p]=o.useState("new folder"),[f,u]=o.useState("new content"),[h,w]=o.useState("string"),[N,i]=o.useState(!1);o.useEffect(()=>{n(!0),c.content.getTopLevel().then(t=>{C(t)}).catch(t=>{s(t.message)}).finally(()=>{n(!1)})},[l]);const b=()=>{p("new folder"),a(!0)},D=()=>{u("new content"),w("string"),i(!0)},F=async()=>{try{n(!0);let t=await c.content.createFolder(m);if(!t)throw new Error("Could not create folder.");d(`/dashboard/content/folder/${encodeURIComponent(t.id)}`)}catch(t){n(!1),s(t)}},S=async()=>{i(!1);try{n(!0);let t=await c.content.create({name:f,type:h});if(!t)throw new Error("Could not crate content.");d(`/dashboard/content/${encodeURIComponent(t.id)}`)}catch(t){n(!1),s(t)}};return e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsxs(M,{children:[e.jsx(E,{open:N,createNewContent:S,newContentName:f,setNewContentName:u,newContentType:h,setNewContentType:w,onClose:()=>{i(!1)}}),e.jsx(P,{open:j,onClose:()=>a(!1),children:e.jsxs(U,{children:[e.jsx($,{children:"new folder"}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),a(!1),F()},children:[e.jsx(k,{children:e.jsxs(z,{children:[e.jsx(G,{children:"name"}),e.jsx(H,{autoFocus:!0,required:!0,value:m,onChange:t=>p(t.target.value)})]})}),e.jsx(q,{children:e.jsx(J,{type:"submit",startDecorator:e.jsx(R,{}),children:"submit"})})]})]})}),e.jsxs(K,{sx:{width:1},children:[e.jsx(L,{onNewFolder:b,onNewContent:D}),x?e.jsx(Q,{justifyContent:"center",alignItems:"center",width:1,height:300,children:e.jsx(V,{})}):e.jsx(I,{folders:r?.folders||[],content:r?.content||[],reload:()=>{g(!l)}})]})]})]})};function ye({}){return T("content - atom")}const Te=y(function({}){return A({route:[{name:"content",href:"/dashboard/content"}],sidebarActiveTab:B.content,title:"content"}),e.jsx(W,{})});export{Te as default,ye as meta};
